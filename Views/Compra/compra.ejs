<!doctype html>
<html lang="en">
      <head>
            <!-- Required meta tags -->
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">

            <!-- Bootstrap CSS -->
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

            <!--Usamos Boxicons-->
            <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>

            <title>Compra</title>

            <script>
                  function validar(e) {
                    key = e.keyCode || e.which;
                    
                        tecla = String.fromCharCode(key).toLowerCase();
                        letras = "abcdefghijklmnñopqrstuvwxyz";
                        especiales="8-37-38-46-164"
                        teclado_especial=false;
          
                        for(var i in especiales){
                              if(key==especiales[i]){
                                    teclado_especial=true;break;
                              }
                        }
          
                        if(letras.indexOf(tecla)==-1 && !teclado_especial){
                              return false;
                        }
                  }
            </script>
      </head>

      <body>
            <div>
                  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                        <div class="container-fluid">
                              <a class="navbar-brand"></a>

                              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                              <span class="navbar-toggler-icon"></span>
                              </button>

                              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                          <li class="nav-item">
                                                <a class="nav-link active" aria-current="page" href="/cliente">Cliente</a>
                                          </li>

                                          <li class="nav-item">
                                                <a class="nav-link active" aria-current="page" href="/cardex">Cardex</a>
                                          </li>

                                          <li class="nav-item">
                                                <a class="nav-link active" aria-current="page" href="/">Menu</a>
                                          </li>
                                          
                                          <li class="nav-item">
                                                <a class="nav-link active" aria-current="page" href="/venta">Venta</a>
                                          </li>

                                          <li class="nav-item">
                                                <a class="nav-link active" aria-current="page" href="/facturas">Facturas</a>
                                          </li>
                                    </ul>
                              </div>
                        </div>
                  </nav>
            </div>

            <div class="container mt-5">
                  <div class="row">
                        <div class="col-md-7">
                              <table class="table table-bordered table-hover">
                                    <thead>
                                          <tr>
                                                <th scope="col">N°</th>
                                                <th scope="col">Producto</th>
                                                <th scope="col">Cantidad</th>
                                                <th scope="col">Precio</th>
                                                <th scope="col">Precio Total</th>
                                                <th scope="col">Actions</th>
                                          </tr>
                                    </thead>

                                    <tbody>
                                          <% results.forEach((compra) => { %>
                                                <tr>
                                                      <td><%= compra.Id_compra %></td>
                                                      <td><%= compra.Empresa %></td>
                                                      <td><%= compra.Cantidad %></td>
                                                      <td><%= compra.Precio %></td>
                                                      <td><%= compra.PrecioTotal %></td>
                                                      <td>
                                                            <a href="/compra_edit/<%= compra.Id_compra %>" class="btn btn-info"><i class='bx bxs-receipt'></i></a>
                                                            <a href="/deleteCompra/<%= compra.Id_compra %>" class="btn btn-danger"><i class='bx bxs-trash' ></i></a>
                                                      </td>
                                                            
                                                </tr>
                                          <% }) %>
                                    </tbody>
                              </table>
                        </div>
                        
                        <div class="col-md-5">
                              <div class="card"  >  
                                    <div class="card-body">

                                          <form action="/saveCompra" method="POST">
                                                <div class="form-group">
                                                      <input type="text" id="empresa" name="empresa" onkeypress="return validar(event)" placeholder="Nombre" class="form-control" autofocus>
                                                </div>
                                                <br>
                                                <div class="form-group">
                                                      <input type="number" id="cantidad" name="cantidad" placeholder="Cantidad" class="form-control">
                                                </div>
                                                <br>
                                                <div class="form-group">
                                                      <input type="number" id="precio" name="precio" placeholder="Precio" class="form-control">
                                                </div>
                                                <br>
                                                <div class="form-group">
                                                      <input type="number" id="preciototal" name="preciototal" placeholder="Precio Total" class="form-control">
                                                </div>
                                                <br>

                                                <button type="submit" class="btn btn-primary">
                                                      <i class='bx bxs-save bx-md' ></i>
                                                </button>
                                          </form>

                                    </div>
                              </div>
                        </div>
                  </div>
            </div>

            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
            </body>
</html>